2020 International Conference on Assistive and Rehabilitation Technologies (iCareTech) | 978-1-7281-9782-1/20/$31.00 ©2020 IEEE | DOI: 10.1109/iCareTech49914.2020.00033 2020 International Conference on Assistive and Rehabilitation Technologies (1CareTech) Development of Color Following Robot for Interaction with Autistic Children Mohammad O.A. Agel, Ali AlHalabi, Anas Jabre Department of Engineering, Faculty of Engineering and Information Technology, Al-Azhar University-Gaza, Gaza P.O Box 1277, Palestine m.agel@alazhar.edu.ps, aamadS50@gmail.com, anas12460@gmail.com Abstract — Children and kids who are on the autism spectrum (who suffer from ASD) do, like all kids, enjoy playing, but they face difficulties and challenges with conventional toys and games. They are commonly faced with the lack of playing options not usually faced by non-autistic peers, managing to play with only a handful of toys, or in a repetitive way. For instance, an autistic child might enjoy the rotation of the wheels of a toy car or bicycles, or the repetitive completion of the same puzzles. This paper presents a development of a color following robot by merging computer vision algorithms and toy car in order to be a joy and benefit to autistic children. This car-like robot asks the autistic kid to show it a ball of a certain color and the car praises the child if the color is correct and follows the ball and the child for a while, or if the color is wrong it asks the child to try again in an interactive and fun way. The inspiration behind this work was to provide a complex in depth but very intuitive and easy to use application of computer vision and modern processing power in small form factors (e.g. Raspberry Pi) to provide an interactive toy for autistic kids. Keywords — Autistic kids, robot, computer-vision, interactive toy, color following. I. INTRODUCTION Autism is defined as a developmental disorder mainly characterized by complications when it comes to social interactions and communicating with other people, and by restricted and repetitive behavior [1]. Data from the Centers for Disease Control reports that approximately 1 in 54 children in the United States of America are affected by autism today. Children on the upper end of the autism scale face loneliness more periodically and intensely compared to their non-autistic peers. In spite of familiar thoughts that children on the autism spectrum prefer to be alone. It is proven difficult for autistic kids and adults to make new friendships or even maintain old ones. A prediction of loneliness of autistic kids can be deducted by the quality of friendships not by the sheer number of friends they might have. Functional friendships, for example the ones which result in invitations to activities like partying and so on, may substantially affect the quality of life [2]. Computerized camera-based systems are usually designed with the purpose of tracking objects that can be seen by said camera. This paper envelops the design of a computerized camera-based tracking algorithm and the implementation of it in a robot that is used to continuously chases a moving pre- defined object without the need of adjusting the camera for different scenarios. The on-board camera acts as the main and only feedback sensor of the robot that continuously processes data of scenes containing the object, and such is the basis to this RC Toy Car that implements the previous in a friendly toy-looking car for autistic kids. In this paper an interactive toy design and code is presented. The proposed system provides autistic kids an interactive and fun toy. The Color following robot relies on asking the autistic kid to show ‘it’ a certain color ball from between certain objects, and the camera will process each frame and if such object was indeed shown to the Color following Car Toy, the car will play a speech appraising the kid and following that ball for some time and then asks for another color, or it will ask the autistic kid to try again if the selected color was not the one asked for. This paper consists of the following sections, brief discussion of previous works is reviewed in Section II. Design of system and methods of implementation are discussed in Section III. Results are presented in Section IV. Section V is a summary and conclusion of this presented paper. II. LITERATURE REVIEW There has been a noticeable growth in interest and progress in computer vision in the recent decades, alongside many other areas of computer science. This is due to the natural interest of researchers and computer scientists not to mention the increment of processing power of modern computers lead to the thirst for new modern features. Of the most desirable capability would be an analysis of the ambient environment in a 3-D scene and the identification and perception of objects in such environment. Many possibilities and opportunities could be achieved, or rather unlocked, by modern 3D computer methods and algorithms, such possibilities may include vehicles and robots automated navigation, smart surveillance systems, and much more [3]. The optimal outcome of computer vision is to extract certain data and useful information from still images or videos as shown in Fig.1. This itself is a challenging task that has engaged thousands of programmers and scientists over the last forty years, yet, they are still nowhere close to building any form of machines with general-purpose seeing abilities. Never the less, the world has witnessed incredible advancement in computer vision algorithms, and a large-scale 978- 1-728 1-9782-1/20/$31.00 ©2020 IEEE 137 DOT 10.1109/ACareTech49914.2020.00033 Authorized licensed use limited to: UNIVERSIDAD DEL ROSARIO. Downloaded on December 13,2023 at 21:43:13 UTC from IEEE Xplore. Restrictions apply. Fig. 1. Simple algorithm to find a yellow ball placement of computer vision technology in consumer products in the last decade. For instance, face recognition can be found in almost all kind of digital cameras. This rapid progress in computer vision is due to several reasons, most notably is that the large increment of processing power, reduction in size, substantial increment of Random- Access Memory and storage capacity of computers. Not to mention the increased and optimized use of machine learning [4]. In [5] Rias and DehKordi introduced Find me computer game that runs on 1OS. It is designed for kids who are on the autism spectrum and suffer from severe communication limitations including nonverbal autistic kids. The application could be used by autistic kids who are as young as 18 months. It lets autistic children click on human characters in different scenery ranging from simple to complex in the game (Fig. 2). The purpose of this game is to enable the autistic children to practice some forms of basic social interactions. On the same note, Dillon and Underwood developed a story telling game which purpose is to further explore autistic kids’ sense of imagination via their writing abilities [6]. Many other products and applications for autistic kids have been designed, varying from language skills enhancement [7 and 8] by Rahman and Ferdous, Virtual simulators [9] by Neale, Cobb, and Wilson Who designed a front-end approach to the user-centered design. Fig. 2. A snippet from Find Me game [5] 138 Resistor ADC Port Fig. 3 Tangible user interface [10] Fig. 4. Examples of Mini-games in the mentioned SG [10] In [10], a Serious Game (SG) was developed for autistic. It is designed to be considered as a play therapy option for autistic kids. This game consisted of two parts; namely a Tangible User Interface and a Graphical User Interface. The physical part was constructed using building blocks, similar to Lego blocks, which was embedded with electronics (Fig. 3 and 4). The game asks the kid to recreate the shape, be it a letter, pattern, or number, which appears on the screen using building blocks. In addition, the GUI will replace the correctly placed blocks with white models on the GUI, providing real-time feedback which would reduce the game’s difficulty. The goal of this SG is to help enhancing autistic children’s mental and cognitive abilities, their social interactions and their adaptive behavior. ComFiM is a game with multitouch devices in mind, was designed and created with encouraging autism to communicate more with each other [11], ComFiM has three levels. One of the scenarios happens in a farm. In this scenario, tasks are divided into two cases; to be done individually and to be done in groups. The required tasks are provided by a mentor, and the player(s) has/have to use some of the objects in the upper right corner to finish the tasks as shown in Fig. 5. Authorized licensed use limited to: UNIVERSIDAD DEL ROSARIO. Downloaded on December 13,2023 at 21:43:13 UTC from IEEE Xplore. Restrictions apply. USB CONNECTOR Fig. 5. A snippet from ConFiM game [11] Bauminger et al. developed a “Story Table” app aiming to provide children, who have high functionality autism, with means to develop and enhance their communication skills using storytelling methods [12]. III. DESIGN AND IMPLEMENTATION In this part of the paper, the color following robot’s hardware and software design and implementation will be thoroughly discussed. Fig. 6 shows the components and the functional block diagram of the proposed system, which are the following; a Raspberry Pi single-board computer which is the only processing power of the project, four DC motors which are responsible for the movement alongside motor drivers, batteries and Battery Management System (BMS), speaker to provide sound, and a camera that captures video streams for processing. A. Hardware Design The mechanical design of the Color Following Robot is simple; it consists of four DC motors driving the whole structure. The structure itself is a toy RC car of which all original components are replaced with custom new components that build up the system, except for the four DC motors as shown in Fig. 7. The circuit is rather simple and low cost; it consists of four DC motors, two L298N Dual H-Bridge Motor driver, two 5V power sources, and Raspberry P1. The Raspberry Pi hardware, as shown in Fig. 8, is a close =) = Fig. 6. Block diagram of the proposed color following robot 139 Fig.7. Circuit diagram of the proposed system source and thus it can be only provide a physical illustration of the board and discuss the key hardware components available on the Raspberyy Pi board. SoC (System on Chip) used on- board is a custom ARM chip specifically designed and manufactured for the Raspberry Pi 3 by Broadcom, the Broadcom BCM2837 system-on-chip is designed with four ARM _ Cortex-A53 which are of the high-performance processing cores clocked at 1.2GHz base frequency with Level 1 and Level 2 cache memory, and a VideoCore IV GPU(Graphics Processing Unit), and a 1GB(1024 MB) LPDDR2 memory module. On board, Broadcom BCM43438 wireless radio is included which provides 2.4GHz 802.11n connectivity, BLE (Bluetooth Low Energy) alongside the Classic Bluetooth 4.1 functionality. There are 53 GPIO pins on the Raspberry Pi divided into 2 banks, of which only 28 GPIO pins exposed via a 40-pin connector header alongside 3.3volt, Svolt and ground pins. Raspberry Pi also utilizes an SMSC LAN9514 chip that provides 4x USB2.0 ports and 10/100 Ethernet connectivity. The SMSC chip is interfaced with the Broadcom SoC via the single USB channel that is natively provided, providing both USB-to-Ethernet and USB functionality [13]. Fig. 9 and 10 shows the open frame and closed frame of the proposed color following robotic toy. Wireless / Bluetooth System- on-Chip GPIO Fig.8. Raspberry Pi model 3B+ Authorized licensed use limited to: UNIVERSIDAD DEL ROSARIO. Downloaded on December 13,2023 at 21:43:13 UTC from IEEE Xplore. Restrictions apply. Mey XN Controlling Board ». >) Motors and wheels — 2 © Fig. 10. Closed-frame of proposed color following robotic toy B. Software Design The software part is the most sensitive and complicated part of the system. It consists of multiple segments of operation that depends on particular low-level drivers written from scratch to interface with Linux I/O for an optimum mixture of speed and compatibility. The Raspberry pi that is running the system is operated by Raspbian OS (Debian for Raspberry Pi) which is a Linux operating system based on Debian that is optimized to run on Raspberry Pi and take advantage of its hardware in the most optimal way. The programming language used to write the code of this system is C/C++ for optimum performance. Thus, special I/O drivers for the GPIO and other peripherals for the raspberry pi were written as a C++ class called PIN class. PIN Library is a C++ external file that includes classes and subroutines to interface with some of the available I/O interfaces provided by the BCM2837 SoC through Linux drivers for optimum compatibility and speed. Sequential programming is usually fine and easier than multi-threaded programming, but the code needs to do multiple things concurrently and keep track of many variables 140 Get Center and Radius of ball Update Ram Values of ball Fig. 11. Computer vision ball tracking thread flowchart and operations, thus if sequential programming was used instead of dividing into threads, the system’s performance would be very inadequate and the usability would be very low. The code itself is comprised of two parts that run concurrently as software threads. The first thread is responsible for computer vision and processing video stream from the camera using the OpenCV (Open Source Computer Vision) Library and binaries provided for Linux. OpenCV is an open-source software library most commonly used for computer vision, AI (Artificial Intelligence), and Computer Learning applications. It was built to act as a unified infrastructure for programmers utilizing computer vision, and to assist in the usage of computer vision in both commercial and hobbyist products. As shown in Fig. 11, the thread starts by making sure the USB camera is online and gives it time to initialize, next, it takes a frame and checks if the frame has the color it asked for and makes sure it is a circle and plays the relevant sound, then it gets the center of the ball in X-Y plane and radius and feeds them to the other thread of execution which is responsible for moving the car to direction of the ball. The second thread of operation is responsible for the movement of the robot, it gets the center of the robot of which it, then decides to rotate left or right and the radius which it uses to decide to go forth or back as shown in Fig. 12. The first thread updates the relevant values in memory so Authorized licensed use limited to: UNIVERSIDAD DEL ROSARIO. Downloaded on December 13,2023 at 21:43:13 UTC from IEEE Xplore. Restrictions apply. Get Radius and Center from Main thread Yes Is ball centered horizontally Center The camera on X-axis Move and maintain a certain Distance from the ball based on Radius Fig.13. Input picture Fig. 14. Isolating wanted color Fig. 12.1 Ball movement tracking thread flowchart that the second thread (movement thread) then decides the right polarity of the DC motors to either move forward, backward, left, or right to follow the object. It is a rather straight forward decision-making routine compared to the computer vision thread, but equal in importance for the system non the less. The steps of execution follow a path of image processing which starts with capturing a frame, reducing noise via Gaussian Blur algorithm, then it removes all the colors that are not of the required ball’s color, then the frame should, assuming that color exists in it, see only the object of that color with everything else black. The image processing steps are represented in Figures 13 through 17. This makes the next step of looking for a circle (a two-dimensional representation of a ball) easier since all other balls or circular objects of no need are eliminated. If indeed the ball of that color is in the frame, the radius and X-Y locations of the ball are updated in the shared-memory scope so the movement thread could see them and move accordingly. IV. FINAL RESULTS The proposed system is a novel implementation of a first of a kind toy for autistic kids that use modern technologies in hardware and software. The Raspberry Pi, drivers and motors are housed in one unit to simplify dealing with the toy for Fig. 16. Detecting edges parents and kids. The processing of data and decision making is done locally using the Raspberry Pi eliminating the need for a separate processing station which in turn makes it a compact and easy to use system. Fig. 18 shows the final product of color following robotic toy. The robotic toy has been tested for operation and safety beforehand. However, the toy needs mild training and parental supervision whilst in use. The system boosts the autistic child’s ability to distinguish between colors, self-esteem, and the ability to better understand embedded orders in everyday conversation. Fig. 15. Converting to grey-scale Fig.17. Finding the circle 141 Authorized licensed use limited to: UNIVERSIDAD DEL ROSARIO. Downloaded on December 13,2023 at 21:43:13 UTC from IEEE Xplore. Restrictions apply. Fig. 218. Final product Moreover, the cost of producing such toy is rather cheap, around 100 USD which puts it in an affordable price range for many families and autistic child-related institutions which are usually underfunded and introduces autistic children to technological devices. Fig. 19 shows an autistic kid trying an early prototype of the system, from early observations the kid seemed to enjoy interacting with the robot. Fig. 19. An autistic kid interacting with the color following robotic toy V. CONCLUSION In this paper, an interactive toy for autistic kids was presented. The integration between computer vision and robotics resulted in different applications, but the focus here is just at one of them, visual servoing. It is the use of feedback data fed by a vision sensor and using it to control the motion of the robot. Processing this data and turning it into useful information is done via the OpenCV library. It uses mathematical methods and equations to modify and analyze the data acquired from the picture to look for a predefined object, upon finding this object the picture is processed again to make out the position or meaning of the object. This information is then fed to a control algorithm that is used to move the robot accordingly. The proposed robot boosts the autistic child's ability to 142 distinguish between colors, self-esteem, and the ability to better understand embedded orders in everyday conversation. ACKNOWLEDGEMENT We would like to express our deepest appreciation for the Faculty of Engineering and Information Technology at Al-Azhar University- Gaza which provide us the facilities that led us to succeed this research work. This work has been developed as a result of the i- CARE project researcher and student capacity building activities and efforts. Increasing the Conformance of Academia towards Rehabilitation Engineering (i-CARE) project is co-funded by the European Union under the Erasmust+ Programme, Key Action: Cooperation for innovation and the exchange of good practices, Action Type: Capacity Building in higher education. Project Reference: 586403-EPP-1-2017-1-PS-EPPKA2-CBHE-JP, Start: 15- 10-2017 - End: 14-10-2020. REFERENCES [1] American Psychiatric Association, Diagnostic and Statistical Manual of Mental Disorders. Fifth Edition. American Psychiatric Publishing; 2013. A. F. Burgess and S. E. Gutstein, "Quality of life for people with autism: Raising the standard for evaluating successful outcomes," Child and Adolescent Mental Health, vol. 12, (2), pp. 80-86, 2007. B. Cyganek and J. P. Siebert, An Introduction to 3D Computer Vision Techniques and Algorithms. 2011. S. J. Prince, Computer Vision: Models, Learning, and Inference. 2012. R. M. Rias and S. R. Dehkordi, "Computer game approach for children with autism spectrum disorder: A pilot study," in 6th WSEAS World Congress: Applied Computing Conference, 2013. G. Dillon and J. Underwood, "Computer mediated imaginative storytelling in children with autism," /nternational Journal of Human- Computer Studies, vol. 70, (2), pp. 169-178, 2012. A. Anwar et al, "A computer game based approach for increasing fluency in the speech of the autistic children," in 20// IEEE 11th International Conference on Advanced Learning Technologies, 2011. M. M. Rahman, S. Ferdous and S. I. Ahmed, "Increasing intelligibility in the speech of the autistic children by an interactive computer game," in 20/0 IEEE International Symposium on Multimedia, 2010. H. Neale, S. Cobb and J. Wilson, "A front ended approach to the user- centred design of VEs," in Proceedings IEEE Virtual Reality 2002, 2002. A. O. Barajas, H. Al Osman and S. Shirmohammadi, "A serious game for children with autism spectrum disorder as a tool for play therapy," in 2017 IEEE 5th International Conference on Serious Games and Applications for Health (SeGAH), Canada, 2017. P. C. Ribeiro and A. B. Raposo, "ComFiM: A game for multitouch devices to encourage communication between people with autism," in 2014 IEEE 3nd International Conference on Serious Games and Applications for Health (SeGAH), 2014. N. Bauminger et a/, "Enhancing social communication in high- functioning children with autism through a co-located interface," in 2007 IEEE 9th Workshop on Multimedia Signal Processing, 2007. https://www.raspberryp1.org/products/raspberry-pi-3-model-b/ accessed on 29 June 2020 [2] [3] [4] [5] [6] [7] [8] [9] [10] [11] [12] [13] Authorized licensed use limited to: UNIVERSIDAD DEL ROSARIO. Downloaded on December 13,2023 at 21:43:13 UTC from IEEE Xplore. Restrictions apply. 